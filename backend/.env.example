# Database Configuration
# PostgreSQL connection string
# Format: postgresql://username:password@host:port/database
SHUSAI_DB_URL=postgresql://user:password@localhost:5432/shuttersense

# Master Encryption Key (REQUIRED)
# Generate using: python setup_master_key.py
# This key encrypts remote storage credentials in the database
SHUSAI_MASTER_KEY=

# Optional: Override default cache TTL (seconds) per collection state
# COLLECTION_CACHE_TTL_LIVE=3600
# COLLECTION_CACHE_TTL_CLOSED=86400
# COLLECTION_CACHE_TTL_ARCHIVED=604800

# Optional: Server Configuration
# SERVER_HOST=0.0.0.0
# SERVER_PORT=8000
# SERVER_RELOAD=true

# Optional: CORS Configuration (for frontend dev server)
# CORS_ORIGINS=http://localhost:3000,http://localhost:5173

# Optional: Logging Configuration
# SHUSAI_LOG_LEVEL=INFO
# SHUSAI_LOG_DIR=logs
# SHUSAI_ENV=development

# Optional: Local Collection Security
# Comma-separated list of authorized root paths for local collections
# SHUSAI_AUTHORIZED_LOCAL_ROOTS=/photos,/media,~/Pictures

# Optional: SPA Distribution Path
# SHUSAI_SPA_DIST_PATH=frontend/dist

# =============================================================================
# OAuth 2.0 Authentication (Required for user login)
# =============================================================================

# Google OAuth (https://console.cloud.google.com/apis/credentials)
# 1. Create OAuth 2.0 Client ID (Web application type)
# 2. Add authorized redirect URI: http://localhost:8000/auth/callback/google
GOOGLE_CLIENT_ID=
GOOGLE_CLIENT_SECRET=

# Microsoft OAuth (https://portal.azure.com/#view/Microsoft_AAD_RegisteredApps)
# 1. Register new application
# 2. Add redirect URI: http://localhost:8000/auth/callback/microsoft
# 3. Create client secret under "Certificates & secrets"
MICROSOFT_CLIENT_ID=
MICROSOFT_CLIENT_SECRET=

# Base URL for OAuth redirects (no trailing slash)
# OAUTH_REDIRECT_BASE_URL=http://localhost:8000

# =============================================================================
# Session Configuration
# =============================================================================

# Secret key for signing session cookies (REQUIRED for auth)
# Generate using: python -c "import secrets; print(secrets.token_urlsafe(32))"
SESSION_SECRET_KEY=

# Session duration in seconds (default: 86400 = 24 hours)
# SESSION_MAX_AGE=86400

# Cookie security settings
# SESSION_HTTPS_ONLY=false  # Set to true in production
# SESSION_SAME_SITE=lax

# =============================================================================
# JWT API Token Configuration
# =============================================================================

# Secret key for signing API tokens (REQUIRED for API token feature)
# Generate using: python -c "import secrets; print(secrets.token_urlsafe(32))"
# IMPORTANT: Use a DIFFERENT key from SESSION_SECRET_KEY
JWT_SECRET_KEY=

# JWT algorithm (default: HS256)
# JWT_ALGORITHM=HS256

# Default API token expiration in days (default: 90)
# API_TOKEN_DEFAULT_EXPIRY_DAYS=90


# =============================================================================
# Security Settings
# =============================================================================

# Require agent attestation for all agent API requests
# Must be set on Production servers
# REQUIRE_AGENT_ATTESTATION=true

# Super admin email hashes (comma-separated SHA-256 hex digests)
# Generate a hash: python -c "import hashlib; print(hashlib.sha256('admin@example.com'.lower().encode()).hexdigest())"
# SHUSAI_SUPER_ADMIN_HASHES=hash1,hash2

# =============================================================================
# Job Queue Configuration
# =============================================================================

# Comma-separated list of tool types to run in-memory on the server
# By default (empty), ALL jobs are persisted to the database and executed by agents
# Only use this for development/testing when no agents are available
#
# Available tool types: photostats, photo_pairing, pipeline_validation
#
# Examples:
#   INMEMORY_JOB_TYPES=photostats              # Only photostats runs on server
#   INMEMORY_JOB_TYPES=photostats,photo_pairing # Multiple tools on server
#   INMEMORY_JOB_TYPES=                         # All jobs go to agents (default)
#
# WARNING: In-memory jobs run on the API server and may impact performance.
# For production, leave empty and use distributed agents instead.
# INMEMORY_JOB_TYPES=

# =============================================================================
# Web Push Notifications (VAPID)
# =============================================================================

# VAPID keys for Web Push notification delivery (Issue #114)
# Generate using: python -c "from py_vapid import Vapid; v = Vapid(); v.generate_keys(); print('Public:', v.public_key); print('Private:', v.private_key)"
# Or use: npx web-push generate-vapid-keys
VAPID_PUBLIC_KEY=
VAPID_PRIVATE_KEY=

# VAPID subject identifier (mailto: or https: URL)
# Must match the domain or contact email of the push sender
VAPID_SUBJECT=mailto:admin@shuttersense.ai